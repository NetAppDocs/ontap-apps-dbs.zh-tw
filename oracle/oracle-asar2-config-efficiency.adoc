---
sidebar: sidebar 
permalink: oracle/oracle-asar2-config-efficiency.html 
keywords: oracle, efficiency, compression, compaction, deduplication, ASA r2 
summary: 使用ASA r2 提升 Oracle 資料庫與儲存效率 
searchtitle: Oracle 資料庫與ONTAP與ASA r2 的效率特性 
---
= 效率
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
ONTAP 的空間效率功能已得到全面支持，並針對ASA r2 系統進行了最佳化。在幾乎所有情況下，最佳做法是保留預設設定並啟用所有效率功能。

ASA r2 系統是全快閃 SAN 平台，因此壓縮、精簡和重複資料刪除等效率技術對於最大限度地提高可用容量和降低成本至關重要。



== 壓縮

壓縮透過對資料中的模式進行編碼來減少空間需求。採用基於 SSD 的ASA r2 系統，壓縮可顯著節省成本，因為快閃記憶體消除了為提高效能而過度配置的需要。ONTAP自適應壓縮預設為啟用，並已使用企業工作負載（包括 Oracle 資料庫）進行了全面測試，即使在延遲以微秒為單位測量的環境中，也沒有可衡量的效能影響。在某些情況下，由於壓縮資料佔用較少的快取空間，效能會得到提升。


NOTE: 溫度敏感儲存效率 (TSSE) 不適用於ASA r2 系統。在ASA r2 系統中，壓縮不是基於熱資料（經常存取的資料）或冷資料（不經常存取的資料）。壓縮無需等待資料冷卻即可開始。



== 自適應壓縮

自適應壓縮預設使用 8KB 的區塊大小，與關聯式資料庫常用的區塊大小相符。較大的區塊大小（16KB 或 32KB）可以提高順序資料（如交易日誌或備份）的效率，但對於活動資料庫應謹慎使用，以避免在覆蓋期間產生開銷。


NOTE: 對於日誌或備份等靜止文件，區塊大小可以增加到 32KB。更改預設設定前，請先查閱NetApp指南。


CAUTION: 不要對串流備份使用 32KB 壓縮和去重功能。使用 8KB 壓縮以維持去重效率。



== 壓縮對齊

對於隨機覆蓋，壓縮對齊很重要。確保 LUN 類型正確、分割偏移量（8KB 的倍數）以及檔案系統區塊大小與資料庫區塊大小一致。備份或日誌等順序資料不需要考慮對齊問題。



== 資料壓縮

壓縮技術透過允許多個壓縮塊共享同一個實體塊來補充壓縮技術。例如，如果一個 8KB 的資料塊壓縮到 1KB，壓縮可以確保剩餘空間不會被浪費。此功能為內聯功能，不會造成效能損失。



== 重複資料刪除

去重操作會移除資料集中的重複資料區塊。雖然 Oracle 資料庫由於具有獨特的區塊頭和區塊尾，通常只能節省極少的重複數據，但ONTAP重複資料刪除仍然可以從零區塊和重複模式中回收空間。



== 效率與精簡配置

ASA r2 系統預設使用精簡配置。效率特性與精簡配置相輔相成，可最大限度地利用可用容量。


NOTE: 在ASA r2 儲存系統上，儲存單元始終採用精簡配置。不支援厚配置。



== 快速輔助科技（QAT）

在NetApp ASA r2 平台上，Intel QuickAssist 技術 (QAT) 提供硬體加速的效率，這與沒有 QAT 的軟體為基礎的溫度敏感儲存效率 (TSSE) 有很大不同。

*支援硬體加速的快速存取終端 (QAT)：*

* 將壓縮和加密任務從 CPU 核心卸載。
* 能夠立即提高熱數據（頻繁存取的數據）和冷數據（不頻繁存取的數據）的線上處理效率。
* 顯著降低CPU佔用率。
* 提供更高的吞吐量和更低的延遲。
* 提高了對效能要求較高的操作（例如 TLS 和 VPN 加密）的可擴充性。


*不含QAT的TSSE：*

* 依靠CPU驅動的進程來實現高效運作。
* 僅對延遲後的冷數據應用效率優化。
* 消耗更多CPU資源。
* 與 QAT 加速系統相比，整體效能受到限制。


因此，現代ASA r2 系統比舊式的僅支援 TSSE 的平台具有更快的硬體加速效率和更好的系統利用率。



== ASA r2 的效率最佳實踐

* NetApp 建議 * 下列事項：



=== ASA r2 預設值

在ASA r2 系統上執行的ONTAP上建立的儲存單元採用精簡配置，預設啟用所有內聯效率功能，包括壓縮、精簡和重複資料刪除。儘管 Oracle 資料庫通常不會從重複資料刪除中獲益匪淺，並且可能包含不可壓縮的數據，但這些預設設定幾乎適用於所有工作負載。ONTAP旨在有效處理所有類型的資料和 I/O 模式，無論它們是否能帶來節省。只有在完全了解原因並且偏離預設設定有明顯好處的情況下，才應該更改預設設定。



=== 一般建議

* 停用加密或應用程式壓縮資料的壓縮：如果檔案已經在應用程式層級壓縮或加密，請停用壓縮以優化效能並允許在其他儲存單元上更有效率地運作。
* 避免將大壓縮區塊與重複資料刪除結合使用：不要在資料庫備份中同時使用 32KB 壓縮和重複資料刪除。對於串流備份，請使用 8KB 壓縮以保持去重效率。
* 監控效率節省：使用ONTAP工具（系統管理員、 Active IQ）追蹤實際的空間節省情況，並在需要時調整策略。

